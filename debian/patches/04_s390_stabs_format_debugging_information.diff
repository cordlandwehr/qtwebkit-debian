Description: build s390 debugging symbols with -gstabs instead of with -g
             to reduce linker memory usage.
             Thanks to Oswald Buddenhagen for the hint.
author: Sune Vuorela <sune@debian.org>
Bug-Debian: http://bugs.debian.org/528485

--- a/WebKit.pri
+++ b/WebKit.pri
@@ -69,6 +69,13 @@ symbian {
     QMAKE_CXXFLAGS.ARMCC += $$RVCT_COMMON_CXXFLAGS
 }
 
+arch=$$system(dpkg-architecture -qDEB_BUILD_ARCH)
+equals(arch, s390) {
+    message("S/390 workaround: is not building with -g, but with -gstabs")
+    QMAKE_CXXFLAGS -= -g
+    QMAKE_CXXFLAGS += -gstabs
+}
+
 symbian|maemo5: DEFINES *= QT_NO_UITOOLS
 
 contains(DEFINES, QT_NO_UITOOLS): CONFIG -= uitools
